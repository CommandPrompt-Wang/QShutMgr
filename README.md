# QShutMgr
# 关机管理器  
    
Powered by open-source Qt\_由开源版 Qt 开发(遵守 GPL v3)  
   
## 注意  
1. <img width="554" alt="image" src="https://user-images.githubusercontent.com/62493399/190623419-abfb2dd9-b066-41e7-8c97-fe6e823d94b4.png">  
2. ↑ 为了通过编译，我按照右边的方法修改了头文件 https://codereview.qt-project.org/c/qt/qtbase/+/236948/2/src/corelib/tools/qalgorithms.h  
3. 根据开源协议“您需要将您使用的Qt库的完整源代码，包括您完成或应用的所有修改，交付给您的用户/客户。或者，您需要提供书面报价，其中包含有关如何获取源代码的说明。另请注意，这必须在您的控制之下(_~~我怎么管啊（悲~~_)，因此仅提供Qt项目或Qt公司提供的源代码链接是不够的。(_~~兄啊...我只有能力提供链接啊，总不可能‘提供书面报价’罢（悲~~_)”
    1. 要获取Qt, 请先下载安装器:https://d13lb3tujbc8s0.cloudfront.net/onlineinstallers/qt-unified-windows-x64-4.4.1-online.exe   
    2. (使用清华源) installer(.exe) --mirror https://mirrors.tuna.tsinghua.edu.cn/qt   
  
   
## 用法
<img width="312" alt="image" src="https://user-images.githubusercontent.com/62493399/190382391-1c56fe84-24f8-4786-93a9-0208166f4fcb.png">
  
1. 在上面一栏中选择基本功能<br>
2. 然后在下一栏中选择高级选项<br>    
    - 程序会自动取消冲突的选项(取消勾选和/或置灰)<br>
3. 鼠标悬停在功能上可以查看说明<br>
  
## 更新日志
### v1.0.0(GitHub 无)
- 功能  
    1. 基本的电源功能(-s(关机), -r(重启), -h(休眠), -l(注销), -p, 睡眠)  
    2. 对于-s, -r, -l, 有倒计时功能   
    3. 其他高级电源管理选项: 强制, 启动后转到固件(BIOS), 注释等  
- 问题  
     1. 注释中出现中文可能会乱码  
     2. 高 DPI 下可能会引起错版和文字显示不全  
	 3. 窗口大小未锁定  
     4. 对于"启动后转到固件"，不能自动请求管理员权限  
- 链接  
     - https://wwd.lanzouv.com/b03p7i6rc	密码:114514
  
### v1.0.37
- 功能  
    1. 为睡眠，-h(休眠)，-l(注销)添加了倒计时  
    2. 对于"启动后转到固件"，增加了自动请求管理员权限的功能  
    3. 解决了中文注释乱码的问题  
    4. 尝试解决高 DPI 的显示问题  
    5. 窗口大小已锁定  
- 问题  
    1. 还不能远程指定计算机(-m 参数涉及到主程序和 ShutMgr.Ext，开学前来不及了)  
        - 因此，指定计算机选项为灰色且按钮无效  
    2. "取消关机"按钮不能结束由 ShutMgr.Ext 启动的睡眠，休眠，注销进程  
        - 请先手动关闭那个黑黑的窗口
    3. 按下"执行"按钮后，会弹出窗口(这是直接调用 shutdown.exe)  
        - 将在未来版本中直接调用 api，将 ShutMgr.Ext 与主程序合并  
    4. 缺少多语言支持  
        - 纯懒癌  
    5. 按下"终止关机"后，若打开的窗口未响应或未关闭，主程序会卡死  
    	- 已在 v1.0.37.1 中修复  
### v1.0.37.1
- 问题修复
    - ShutMgr.exe  
        1. 修复了“终止关机”按钮无法终止ShutMgr.Ext的问题  
        2. 修复了"终止关机"的按钮逻辑，避免因打开的窗口未响应而主程序卡死的问题  
        3. 更改了_about_ 窗口的内容  
    - ShutMgr.Ext.exe  
        - 隐藏了程序窗口   
  
### v1.14.514.1919(呕   
- 新功能   
    - ShutMgr.exe   
        1. 支持了指定远程计算机的功能(命令: shutdown ... -m xxx)   
            - 提示：程序只会检查出基本的名称错误（如带有空格，空的计算机名等等）！   
        2. 添加了状态栏和日志窗口，日志支持保存  
	3. 添加了“指定关机原因”选项(命令: shutdown ... -d [P:|U:|置空]xx:yy)  
        4. 添加了与版本号相关的 彩 蛋 (噔 噔 咚    
- 问题修复   
    - ShutMgr.exe   
        1. 修复了按下“执行”按钮会弹一大堆窗口，主程序未响应的问题   
        2. 添加了未获取到管理员权限的警告   
        3. 修复了错误的工作目录导致的无法调用Ext的问题   
        4. 添加了无法访问Ext的警告   
        5. 添加了未选择任何操作的警告  
	6. 修复了指定计算机窗口可以打开多个的问题
	7. 修改了部分未及时更新的文本
    - ShutMgr.Ext.exe   
        1. 重写了参数部分代码，对开关的识别更高效   
        2. 修复了 -fw, -f, 参数不被识别的问题   
        3. 添加了使用 -fw 参数时，未获取到管理员权限的警告   

### v2.0.0.143  
- 新功能  
    - ShutMgr.exe&ShutMgr.Ext.exe  
        1. 增加了休眠、睡眠、注销等的注释功能  
        2. ShutMgr.exe 略微调整布局，解决文字可能显示不全的问题  
        3. 使用ShutMgr.Notify.exe（见下）进行休眠、睡眠、注销等的通知  
    - 【新】ShutMgr.Notify.exe  
        - 用于在通知中心显示通知  
- 问题修复  
    - ShutMgr.exe  
        1. 修复了某些操作执行时会卡死的问题  
            - 但增加了少量cmd窗口弹窗（比之前少多了）  
    - ShutMgr.Ext.exe  
        - 无  
        
### v2.0.0.200(preview)   
- 新功能   
    - ShutMgr.exe  
        1. 加入了夜间模式
- 问题修复    
    - 无  